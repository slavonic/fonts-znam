\documentclass[11pt]{article}
\usepackage{adjustbox}
\usepackage[top=1in, bottom=1in, left=0.75in, right=0.75in]{geometry}
\usepackage{polyglossia}
   \setmainlanguage{english}
   \setotherlanguages{churchslavonic,russian}
\usepackage{fontspec,luacolor,metalogo}
\usepackage{colortbl}
\setmainfont[Script=Latin,Ligatures=TeX,HyphenChar=-]{Linux Libertine O}
\setmonofont[Scale=MatchLowercase]{FiraSlav}
\newfontfamily\churchslavonicfont[Script=Cyrillic,Ligatures=TeX,Scale=MatchLowercase,HyphenChar=_]{PonomarUnicode.otf}
\newfontfamily\musicFont[Scale=1.75]{MezenetsUnicode}
\newfontfamily\musicsmaller{MezenetsUnicode}
\newfontfamily{\oldstyle}[Scale=1.75,StylisticSet=1]{MezenetsUnicode}
\newfontfamily{\newstyle}[Scale=1.75,StylisticSet=2]{MezenetsUnicode}
\newfontfamily{\contracted}[Scale=1.75,StylisticSet=3]{MezenetsUnicode}
\newfontfamily{\musicFontSalt}[Scale=1.75,Alternate=0]{MezenetsUnicode}
\newfontfamily{\musicFontSaltTwo}[Scale=1.75,Alternate=1]{MezenetsUnicode}
%\newfontfamily{\smol}[Path=../Smolensky/,Extension=.otf,Scale=1.5]{Smolensky-Regular}
\newfontfamily{\smol}[Scale=1.75]{SmolenskyRegular}
\newfontfamily{\archaic}[Scale=MatchLowercase]{Menaion Unicode}
\usepackage{churchslavonic}
\usepackage{cu-kruk}
\usepackage{tikz}
\usetikzlibrary{backgrounds}
\usetikzlibrary{calc}
\usepackage[unicode,
  pdftitle={fonts-znam: fonts for Znamenny Notation},
  pdfauthor={Aleksandr Andreev},
  pdfkeywords={Church Slavonic, Old Church Slavonic, Church Slavic, Znamenny Notation, OpenType, Unicode, церковнославянский, старославянский, знаменная нотация, крюки, столповая нотация}
]{hyperref}

\def\fileversion{1.1}
\let\cuKrukFont=\musicFont
\def\pkg#1{\textsf{#1}}
\def\cs#1{\texttt{\textbackslash #1}}
%
\definecolor{control}{rgb}{1,1,0.4}
\definecolor{empty}{rgb}{0.5,0.5,0.5}
\definecolor{demestvo}{rgb}{0.522,0.878,0.522}
\definecolor{archaic}{rgb}{0.4,0.76,1}
\definecolor{lightgray}{rgb}{0.8,0.8,0.8}

\newcommand*\keystroke[1]{%
  \begin{tikzpicture}[baseline=(key.base), very thin, line cap=round, black, rounded corners=0pt]%
    \node [draw, fill=white, fill opacity=1, rectangle, rounded corners=2pt, inner sep=1pt, minimum width=1.2em, font=\musicsmaller] (key) {#1\strut};

    \begin{scope}[on background layer]
      \draw [rounded corners=1pt, fill=white] ($ (key.north west) + (-2pt, 2pt) $) rectangle ($ (key.south east) + (2pt, -2pt) $);

      \fill [gray!60] ($ (key.south west) + (2pt, 0.1pt) $) -- ($ (key.south west) + (-1pt, -2pt) $)
                  -- ($ (key.south east) + (1pt, -2pt) $)  -- ($ (key.south east) + (-2pt, 0.1pt) $) -- cycle;

      \fill [gray!60] ($ (key.south east) + (-0.1pt, 2pt) $) -- ($ (key.south east) + (2pt, -1pt) $)
                  -- ($ (key.north east) + (2pt, 1pt) $)    -- ($ (key.north east) + (-0.1pt, -2pt) $) -- cycle;
    \end{scope}

    \draw ($ (key.north west) + (0.1pt, -2pt) $) -- ($ (key.north west) + (-2pt, 1pt) $);
    \draw ($ (key.north west) + (2pt, -0.1pt) $) -- ($ (key.north west) + (-1pt, 2pt) $);

    \draw ($ (key.north east) + (-0.1pt, -2pt) $) -- ($ (key.north east) + (2pt, 1pt) $);
    \draw ($ (key.north east) + (-2pt, -0.1pt) $) -- ($ (key.north east) + (1pt, 2pt) $);

    \draw ($ (key.south west) + (0.1pt, 2pt) $) -- ($ (key.south west) + (-2pt, -1pt) $);
    \draw ($ (key.south west) + (2pt, 0.1pt) $) -- ($ (key.south west) + (-1pt, -2pt) $);

    \draw ($ (key.south east) + (-0.1pt, 2pt) $) -- ($ (key.south east) + (2pt, -1pt) $);
    \draw ($ (key.south east) + (-2pt, 0.1pt) $) -- ($ (key.south east) + (1pt, -2pt) $);
  \end{tikzpicture}%
}

\newcommand*\pressedkey[1]{%
  \begin{tikzpicture}[baseline=(key.base), very thin, line cap=round, black, rounded corners=0pt]%
    \node [draw, fill=gray!60, fill opacity=1, rectangle, rounded corners=2pt, inner sep=1pt, minimum width=1.2em, font=\musicsmaller] (key) {#1\strut};

    \begin{scope}[on background layer]
      \draw [rounded corners=1pt, fill=white] ($ (key.north west) + (-2pt, 2pt) $) rectangle ($ (key.south east) + (2pt, -2pt) $);

      \fill [gray!60] ($ (key.north west) + (2pt, -0.1pt) $) -- ($ (key.north west) + (-1pt, 2pt) $)
                 -- ($ (key.north east) + (1pt, 2pt) $) -- ($ (key.north east) + (-2pt, -0.1pt) $) -- cycle;

    \fill [gray!60] ($ (key.north west) + (-2pt, 1pt) $) -- ($ (key.north west) + (-0.1pt, -1pt) $)
                  -- ($ (key.south west) + (-0.1pt, 1pt) $)   -- ($ (key.south west) + (-2pt, -1pt) $) -- cycle;

    \end{scope}

    \draw ($ (key.north west) + (0.1pt, -2pt) $) -- ($ (key.north west) + (-2pt, 1pt) $);
    \draw ($ (key.north west) + (2pt, -0.1pt) $) -- ($ (key.north west) + (-1pt, 2pt) $);

    \draw ($ (key.north east) + (-0.1pt, -2pt) $) -- ($ (key.north east) + (2pt, 1pt) $);
    \draw ($ (key.north east) + (-2pt, -0.1pt) $) -- ($ (key.north east) + (1pt, 2pt) $);

    \draw ($ (key.south west) + (0.1pt, 2pt) $) -- ($ (key.south west) + (-2pt, -1pt) $);
    \draw ($ (key.south west) + (2pt, 0.1pt) $) -- ($ (key.south west) + (-1pt, -2pt) $);

    \draw ($ (key.south east) + (-0.1pt, 2pt) $) -- ($ (key.south east) + (2pt, -1pt) $);
    \draw ($ (key.south east) + (-2pt, 0.1pt) $) -- ($ (key.south east) + (1pt, -2pt) $);
  \end{tikzpicture}%
}

\begin{document}
\title{\pkg{fonts-znam} --- fonts for Znamenny Notation}
\author{Aleksandr Andreev and Nikita Simmons\\version~\fileversion}
\date{\today}
\maketitle

\tableofcontents

\section{Introduction}
This package provides OpenType-CFF PostScript fonts (\texttt{.OTF} fonts)
for typesetting Znamenny Musical Notation encoded in Unicode. Znamenny
Notation was proposed for inclusion in Unicode by the authors and has
been accepted for encoding in a future version of the Unicode Standard.
The latest versions of the fonts may be downloaded from the
\href{https://sci.ponomar.net/music.html}{Slavonic Computing Initiative website}.
Before using the fonts, we suggest reading the Proposal to become familiar with
the encoding methodology (see \cite{PROP}).

\cuKinovar{Warning}: The characters used to write the Znamenny Musical Notation
\href{http://www.unicode.org/alloc/Pipeline.html}{have been accepted}
for encoding in a future version of the Unicode Standard,
however the codepoints may still be subject to change. As such,
these fonts should be considered BETA-stage software, and should be used
for SOFTWARE-TESTING PURPOSES ONLY.

\cuKinovar{Color Data}: The fonts provide information about the color of some
glyphs (such as the cinnabar marks) via data in the COLR and CPAL tables.
However, COLR / CPAL technology is presently not supported by some software.
Color fonts are supported in \href{https://www.colorfonts.wtf/}{modern browsers
and advanced publishing software} and partially supported in
\href{https://office-watch.com/2019/color-font-support-in-microsoft-office-the-story-so-far/}{Microsoft
Office 365}. Color fonts are not supported in \XeTeX{} or \LuaTeX{}, however
the \pkg{churchslavonic} \LaTeX{} package provides the \texttt{autocolormarks} option,
which uses the \cs{cuKinovar} macro to automatically typeset the cinnabar marks in red.
The latest version of the fonts also provides color data in SVG tables,
which allows for automatically coloring cinnabar marks in software that
supports OpenType-SVG fonts, such as Adobe Photoshop, InDesign and Illustrator.

In other software that does not support color fonts, cinnabar marks will appear in black.
Additionally, attempting to manually color the marks using formatting will generally
break the OpenType glyph positioning rules, leading to improper mark positioning.
You are encouraged to only use the fonts in software that supports color fonts. You
can report your results \href{https://github.com/slavonic/fonts-znam/issues/19}{in
the issue tracker}.

\section{Mezenets Unicode}

Mezenets Unicode is a font intended for typesetting Type~A Znamenny Notation (notation
that includes \emph{priznaki}\footnote{The Church Slavonic term ``priznaki''
(sing. ``priznak'') is pronounced with the stress on the second syllable,
unlike its modern Russian paronym.}) and Type~B Notation (notation without
\emph{priznaki}), as well as both old-style and new-style Put / Demestvenny (Kazan) Notation.
An example of Znamenny Notation bearing \emph{priznaki} is presented in Figure~\ref{mezenets}. 
The neumes are encoded at codepoints indicated in Table~\ref{znampts},
and may be entered directly by codepoint, for example, from a Character Map
utility (this is not recommended), or by using one of the entry methods provided.

\begin{figure}[tbp]
%\begin{adjustbox}[width=\textwidth]
\centering
\begin{minipage}{0.75\textwidth}
\begin{churchslavonic}
\noindent
\Large
\cuKrukPara[sylRuleHeight=0.02em]{
𜽟 𜾆𜽂𜼱𜼇 𜽗𜼆 𜽐𜼱𜼢 𜽖𜽃𜼅 𜽜𜼄𜼦 𜾖𜼆𜼤 𜽝𜽃𜼅𜼤𜽘 𜾆𜽃𜼱𜼈 𜽞 𜾬𜽃𜼈𜼤 𜽖𜽃𜼅 𜾒𜼰𜼺𜼆𜼣 𜾖𜼆𜼤 𜾋𜽃𜼅 𜾆𜼄 𜽝𜼄 𜽐𜽃𜼅 𜽗𜽂𜼄 𜽞 𜽐𜽃𜼰𜼅 𜽖𜽃𜼢 𜽗𜽃𜼢 𜾆𜾅𜼇 𜽝𜽂𜼄𜼤𜽘 𜾆𜽂𜼱𜼇 𜾒𜽃𜼱𜼈𜼤 𜽗𜽂𜼇 𜽐𜽂𜼱𜼢 𜽖𜼆 𜽗𜽃𜼅 𜽞 𜾒𜼰𜼺𜼆 𜽝𜽂𜼄 𜽜𜽃𜼅 𜾆𜽂𜼄 𜽗𜽃𜼅 𜽞 𜽐𜽂𜼱𜼇 𜽜𜼆 𜾆𜽃𜼅 𜽞 𜽐𜽃𜼱𜼈 𜽗𜽂𜼇 𜽞 𜽐𜽂𜼱𜼇 𜽖𜼆 𜽗𜽃𜼅 𜽐𜼱𜼆 𜽖𜽃𜼅 𜽜𜽂𜼄𜼦 𜾖𜼆𜼤 𜾋𜽃𜼅 𜾁
\\
хри-стосъ ра-жда-ет-сѧ, сла-ви-те: хри-стосъ съ нб҃съ, срѧ-щи-те: хри-стосъ на зе-мли, воз-но-си-те-сѧ. пои-те го-спо-де-ви всѧ-~ зе-млѧ, и ве-се-лі-емъ вос-по--ите лю-ді-е, ꙗ-кѡ про-сла-ви-сѧ.
}
\end{churchslavonic}
\end{minipage}
\caption{Example of Type~A Znamenny Notation \label{mezenets}}
%\end{adjustbox}
\end{figure}

%%%% put here the table %%%%
\begin{table}[p]
\centering
\caption{Unicode Codepoints for Znamenny and Put / Demestvenny Notations \label{znampts}}
\begin{adjustbox}{max width=\textwidth}
\begin{tabular}{l||c|c|c|c|c|c|c|c|c|c|c|c|c||}
 & 1CF0 & 1CF1 & 1CF2 & 1CF3 & 1CF4 & 1CF5 & 1CF6 & 1CF7 & 1CF8 & 1CF9 & 1CFA & 1CFB & 1CFC \\
\hline
\hline
0 & \cuKruk{\Large ◌𜼀}{\scriptsize 1CF00} & \cuKruk{\Large ◌𜼐}{\scriptsize 1CF10} & \cuKruk{\Large ◌𜼠}{\scriptsize 1CF20} & \cuKruk{\Large ◌𜼰}{\scriptsize 1CF30} & \cellcolor{demestvo}\cuKruk{\Large ◌𜽀}{\scriptsize 1CF40} & \cuKruk{\Large 𜽐}{\scriptsize 1CF50} & \cellcolor{demestvo}\cuKruk{\Large 𜽠}{\scriptsize 1CF60} & \cuKruk{\Large 𜽰}{\scriptsize 1CF70} & \cellcolor{demestvo}\cuKruk{\Large 𜾀}{\scriptsize 1CF80} & \cuKruk{\Large 𜾐}{\scriptsize 1CF90} & \cellcolor{archaic}\cuKruk{\Large 𜾠}{\scriptsize 1CFA0} & \cellcolor{demestvo}\cuKruk{\Large 𜾰}{\scriptsize 1CFB0} & \cellcolor{archaic}\cuKruk{\Large 𜿀}{\scriptsize 1CFC0} \\
\hline
1 & \cuKruk{\Large ◌𜼁}{\scriptsize 1CF01} & \cuKruk{\Large ◌𜼑}{\scriptsize 1CF11} & \cuKruk{\Large ◌𜼡}{\scriptsize 1CF21} & \cuKruk{\Large ◌𜼱}{\scriptsize 1CF31} & \cuKruk{\Large ◌𜽁}{\scriptsize 1CF41} & \cuKruk{\Large 𜽑}{\scriptsize 1CF51} & \cellcolor{demestvo}\cuKruk{\Large 𜽡}{\scriptsize 1CF61} & \cuKruk{\Large 𜽱}{\scriptsize 1CF71} & \cuKruk{\Large 𜾁}{\scriptsize 1CF81} & \cellcolor{demestvo}\cuKruk{\Large 𜾑}{\scriptsize 1CF91} & \cellcolor{archaic}\cuKruk{\Large 𜾡}{\scriptsize 1CFA1} & \cellcolor{demestvo}\cuKruk{\Large 𜾱}{\scriptsize 1CFB1} & \cuKruk{\Large 𜿁}{\scriptsize 1CFC1} \\
\hline
2 & \cuKruk{\Large ◌𜼂}{\scriptsize 1CF02} & \cuKruk{\Large ◌𜼒}{\scriptsize 1CF12} & \cuKruk{\Large ◌𜼢}{\scriptsize 1CF22} & \cuKruk{\Large ◌𜼲}{\scriptsize 1CF32} & \cellcolor{control}\cuKruk{\Large 𜽂}{\scriptsize 1CF42} & \cuKruk{\Large 𜽒}{\scriptsize 1CF52} & \cellcolor{demestvo}\cuKruk{\Large 𜽢}{\scriptsize 1CF62} & \cuKruk{\Large 𜽲}{\scriptsize 1CF72} & \cuKruk{\Large 𜾂}{\scriptsize 1CF82} & \cuKruk{\Large 𜾒}{\scriptsize 1CF92} & \cuKruk{\Large 𜾢}{\scriptsize 1CFA2} & \cellcolor{archaic}\cuKruk{\Large 𜾲}{\scriptsize 1CFB2} & \cuKruk{\Large 𜿂}{\scriptsize 1CFC2} \\
\hline
3 & \cuKruk{\Large ◌𜼃}{\scriptsize 1CF03} & \cuKruk{\Large ◌𜼓}{\scriptsize 1CF13} & \cuKruk{\Large ◌𜼣}{\scriptsize 1CF23} & \cuKruk{\Large ◌𜼳}{\scriptsize 1CF33} & \cellcolor{control}\cuKruk{\Large 𜽃}{\scriptsize 1CF43} & \cuKruk{\Large 𜽓}{\scriptsize 1CF53} & \cellcolor{demestvo}\cuKruk{\Large 𜽣}{\scriptsize 1CF63} & \cuKruk{\Large 𜽳}{\scriptsize 1CF73} & \cuKruk{\Large 𜾃}{\scriptsize 1CF83} & \cuKruk{\Large 𜾓}{\scriptsize 1CF93} & \cuKruk{\Large 𜾣}{\scriptsize 1CFA3} & \cellcolor{demestvo}\cuKruk{\Large 𜾳}{\scriptsize 1CFB3} & \cuKruk{\Large 𜿃}{\scriptsize 1CFC3} \\
\hline
4 & \cuKruk{\Large ◌𜼄}{\scriptsize 1CF04} & \cuKruk{\Large ◌𜼔}{\scriptsize 1CF14} & \cuKruk{\Large ◌𜼤}{\scriptsize 1CF24} & \cellcolor{demestvo}\cuKruk{\Large ◌𜼴}{\scriptsize 1CF34} & \cellcolor{control}\cuKruk{\Large 𜽄}{\scriptsize 1CF44} & \cuKruk{\Large 𜽔}{\scriptsize 1CF54} & \cellcolor{demestvo}\cuKruk{\Large 𜽤}{\scriptsize 1CF64} & \cuKruk{\Large 𜽴}{\scriptsize 1CF74} & \cuKruk{\Large 𜾄}{\scriptsize 1CF84} & \cuKruk{\Large 𜾔}{\scriptsize 1CF94} & \cellcolor{archaic}\cuKruk{\Large 𜾤}{\scriptsize 1CFA4} & \cellcolor{demestvo}\cuKruk{\Large 𜾴}{\scriptsize 1CFB4} & \cellcolor{empty} \\
\hline
5 & \cuKruk{\Large ◌𜼅}{\scriptsize 1CF05} & \cuKruk{\Large ◌𜼕}{\scriptsize 1CF15} & \cuKruk{\Large ◌𜼥}{\scriptsize 1CF25} & \cuKruk{\Large ◌𜼵}{\scriptsize 1CF35} & \cellcolor{control}\cuKruk{\Large 𜽅}{\scriptsize 1CF45} & \cellcolor{demestvo}\cuKruk{\Large 𜽕}{\scriptsize 1CF55} & \cellcolor{demestvo}\cuKruk{\Large 𜽥}{\scriptsize 1CF65} & \cellcolor{demestvo}\cuKruk{\Large 𜽵}{\scriptsize 1CF75} & \cuKruk{\Large 𜾅}{\scriptsize 1CF85} & \cellcolor{demestvo}\cuKruk{\Large 𜾕}{\scriptsize 1CF95} & \cuKruk{\Large 𜾥}{\scriptsize 1CFA5} & \cellcolor{archaic}\cuKruk{\Large 𜾵}{\scriptsize 1CFB5} & \cellcolor{empty} \\
\hline
6 & \cuKruk{\Large ◌𜼆}{\scriptsize 1CF06} & \cuKruk{\Large ◌𜼖}{\scriptsize 1CF16} & \cuKruk{\Large ◌𜼦}{\scriptsize 1CF26} & \cuKruk{\Large ◌𜼶}{\scriptsize 1CF36} & \cellcolor{control}\cuKruk{\Large 𜽆}{\scriptsize 1CF46} & \cuKruk{\Large 𜽖}{\scriptsize 1CF56} & \cellcolor{demestvo}\cuKruk{\Large 𜽦}{\scriptsize 1CF66} & \cellcolor{demestvo}\cuKruk{\Large 𜽶}{\scriptsize 1CF76} & \cuKruk{\Large 𜾆}{\scriptsize 1CF86} & \cuKruk{\Large 𜾖}{\scriptsize 1CF96} & \cuKruk{\Large 𜾦}{\scriptsize 1CFA6} & \cellcolor{archaic}\cuKruk{\Large 𜾶}{\scriptsize 1CFB6} & \cellcolor{empty} \\
\hline
7 & \cuKruk{\Large ◌𜼇}{\scriptsize 1CF07} & \cuKruk{\Large ◌𜼗}{\scriptsize 1CF17} & \cuKruk{\Large ◌𜼧}{\scriptsize 1CF27} & \cellcolor{demestvo}\cuKruk{\Large ◌𜼷}{\scriptsize 1CF37} & \cellcolor{empty} & \cuKruk{\Large 𜽗}{\scriptsize 1CF57} & \cellcolor{demestvo}\cuKruk{\Large 𜽧}{\scriptsize 1CF67} & \cellcolor{demestvo}\cuKruk{\Large 𜽷}{\scriptsize 1CF77} & \cuKruk{\Large 𜾇}{\scriptsize 1CF87} & \cellcolor{demestvo}\cuKruk{\Large 𜾗}{\scriptsize 1CF97} & \cuKruk{\Large 𜾧}{\scriptsize 1CFA7} & \cellcolor{archaic}\cuKruk{\Large 𜾷}{\scriptsize 1CFB7} & \cellcolor{empty} \\
\hline
8 & \cuKruk{\Large ◌𜼈}{\scriptsize 1CF08} & \cuKruk{\Large ◌𜼘}{\scriptsize 1CF18} & \cuKruk{\Large ◌𜼨}{\scriptsize 1CF28} & \cuKruk{\Large ◌𜼸}{\scriptsize 1CF38} & \cellcolor{empty} & \cuKruk{\Large 𜽘}{\scriptsize 1CF58} & \cellcolor{demestvo}\cuKruk{\Large 𜽨}{\scriptsize 1CF68} & \cellcolor{demestvo}\cuKruk{\Large 𜽸}{\scriptsize 1CF78} & \cuKruk{\Large 𜾈}{\scriptsize 1CF88} & \cellcolor{demestvo}\cuKruk{\Large 𜾘}{\scriptsize 1CF98} & \cuKruk{\Large 𜾨}{\scriptsize 1CFA8} & \cellcolor{archaic}\cuKruk{\Large 𜾸}{\scriptsize 1CFB8} & \cellcolor{empty} \\
\hline
9 & \cuKruk{\Large ◌𜼉}{\scriptsize 1CF09} & \cuKruk{\Large ◌𜼙}{\scriptsize 1CF19} & \cuKruk{\Large ◌𜼩}{\scriptsize 1CF29} & \cuKruk{\Large ◌𜼹}{\scriptsize 1CF39} & \cellcolor{empty} & \cellcolor{demestvo}\cuKruk{\Large 𜽙}{\scriptsize 1CF59} & \cellcolor{demestvo}\cuKruk{\Large 𜽩}{\scriptsize 1CF69} & \cellcolor{demestvo}\cuKruk{\Large 𜽹}{\scriptsize 1CF79} & \cuKruk{\Large 𜾉}{\scriptsize 1CF89} & \cellcolor{demestvo}\cuKruk{\Large 𜾙}{\scriptsize 1CF99} & \cellcolor{demestvo}\cuKruk{\Large 𜾩}{\scriptsize 1CFA9} & \cellcolor{archaic}\cuKruk{\Large 𜾹}{\scriptsize 1CFB9} & \cellcolor{empty} \\
\hline
A & \cuKruk{\Large ◌𜼊}{\scriptsize 1CF0A} & \cuKruk{\Large ◌𜼚}{\scriptsize 1CF1A} & \cuKruk{\Large ◌𜼪}{\scriptsize 1CF2A} & \cuKruk{\Large ◌𜼺}{\scriptsize 1CF3A} & \cellcolor{empty} & \cellcolor{demestvo}\cuKruk{\Large 𜽚}{\scriptsize 1CF5A} & \cellcolor{demestvo}\cuKruk{\Large 𜽪}{\scriptsize 1CF6A} & \cellcolor{demestvo}\cuKruk{\Large 𜽺}{\scriptsize 1CF7A} & \cuKruk{\Large 𜾊}{\scriptsize 1CF8A} & \cellcolor{demestvo}\cuKruk{\Large 𜾚}{\scriptsize 1CF9A} & \cellcolor{demestvo}\cuKruk{\Large 𜾪}{\scriptsize 1CFAA} & \cellcolor{archaic}\cuKruk{\Large 𜾺}{\scriptsize 1CFBA} & \cellcolor{empty} \\
\hline
B & \cuKruk{\Large ◌𜼋}{\scriptsize 1CF0B} & \cuKruk{\Large ◌𜼛}{\scriptsize 1CF1B} & \cuKruk{\Large ◌𜼫}{\scriptsize 1CF2B} & \cuKruk{\Large ◌𜼻}{\scriptsize 1CF3B} & \cellcolor{empty} & \cuKruk{\Large 𜽛}{\scriptsize 1CF5B} & \cellcolor{archaic}\cuKruk{\Large 𜽫}{\scriptsize 1CF6B} & \cellcolor{demestvo}\cuKruk{\Large 𜽻}{\scriptsize 1CF7B} & \cuKruk{\Large 𜾋}{\scriptsize 1CF8B} & \cellcolor{demestvo}\cuKruk{\Large 𜾛}{\scriptsize 1CF9B} & \cellcolor{demestvo}\cuKruk{\Large 𜾫}{\scriptsize 1CFAB} & \cellcolor{archaic}\cuKruk{\Large 𜾻}{\scriptsize 1CFBB} & \cellcolor{empty} \\
\hline
C & \cuKruk{\Large ◌𜼌}{\scriptsize 1CF0C} & \cuKruk{\Large ◌𜼜}{\scriptsize 1CF1C} & \cuKruk{\Large ◌𜼬}{\scriptsize 1CF2C} & \cuKruk{\Large ◌𜼼}{\scriptsize 1CF3C} & \cellcolor{empty} & \cuKruk{\Large 𜽜}{\scriptsize 1CF5C} & \cellcolor{archaic}\cuKruk{\Large 𜽬}{\scriptsize 1CF6C} & \cellcolor{demestvo}\cuKruk{\Large 𜽼}{\scriptsize 1CF7C} & \cuKruk{\Large 𜾌}{\scriptsize 1CF8C} & \cellcolor{demestvo}\cuKruk{\Large 𜾜}{\scriptsize 1CF9C} & \cuKruk{\Large 𜾬}{\scriptsize 1CFAC} & \cellcolor{archaic}\cuKruk{\Large 𜾼}{\scriptsize 1CFBC} & \cellcolor{empty} \\
\hline
D & \cuKruk{\Large ◌𜼍}{\scriptsize 1CF0D} & \cuKruk{\Large ◌𜼝}{\scriptsize 1CF1D} & \cuKruk{\Large ◌𜼭}{\scriptsize 1CF2D} & \cuKruk{\Large ◌𜼽}{\scriptsize 1CF3D} & \cellcolor{empty} & \cuKruk{\Large 𜽝}{\scriptsize 1CF5D} & \cuKruk{\Large 𜽭}{\scriptsize 1CF6D} & \cuKruk{\Large 𜽽}{\scriptsize 1CF7D} & \cellcolor{archaic}\cuKruk{\Large 𜾍}{\scriptsize 1CF8D} & \cellcolor{demestvo}\cuKruk{\Large 𜾝}{\scriptsize 1CF9D} & \cuKruk{\Large 𜾭}{\scriptsize 1CFAD} & \cellcolor{archaic}\cuKruk{\Large 𜾽}{\scriptsize 1CFBD} & \cellcolor{empty} \\
\hline
E & \cuKruk{\Large ◌𜼎}{\scriptsize 1CF0E} & \cuKruk{\Large ◌𜼞}{\scriptsize 1CF1E} & \cellcolor{empty} & \cellcolor{demestvo}\cuKruk{\Large ◌𜼾}{\scriptsize 1CF3E} & \cellcolor{empty} & \cuKruk{\Large 𜽞}{\scriptsize 1CF5E} & \cuKruk{\Large 𜽮}{\scriptsize 1CF6E} & \cuKruk{\Large 𜽾}{\scriptsize 1CF7E} & \cellcolor{archaic}\cuKruk{\Large 𜾎}{\scriptsize 1CF8E} & \cellcolor{demestvo}\cuKruk{\Large 𜾞}{\scriptsize 1CF9E} & \cuKruk{\Large 𜾮}{\scriptsize 1CFAE} & \cellcolor{archaic}\cuKruk{\Large 𜾾}{\scriptsize 1CFBE} & \cellcolor{empty} \\
\hline
F & \cuKruk{\Large ◌𜼏}{\scriptsize 1CF0F} & \cuKruk{\Large ◌𜼟}{\scriptsize 1CF1F} & \cellcolor{empty} & \cellcolor{demestvo}\cuKruk{\Large ◌𜼿}{\scriptsize 1CF3F} & \cellcolor{empty} & \cuKruk{\Large 𜽟}{\scriptsize 1CF5F} & \cuKruk{\Large 𜽯}{\scriptsize 1CF6F} & \cellcolor{demestvo}\cuKruk{\Large 𜽿}{\scriptsize 1CF7F} & \cellcolor{archaic}\cuKruk{\Large 𜾏}{\scriptsize 1CF8F} & \cellcolor{demestvo}\cuKruk{\Large 𜾟}{\scriptsize 1CF9F} & \cuKruk{\Large 𜾯}{\scriptsize 1CFAF} & \cellcolor{archaic}\cuKruk{\Large 𜾿}{\scriptsize 1CFBF} & \cellcolor{empty} \\
\hline
\hline
\end{tabular}
\end{adjustbox}

\begin{tabular}{c|c|l}
\cline{2-2}
\textbf{Key:} & \cellcolor{control}~~~ & Control Characters \\\cline{2-2}
              & \cellcolor{archaic}~~~ & Characters Unique to Archaic Znamenny Notation \\\cline{2-2}
              & \cellcolor{demestvo}~~~ & Characters Unique to Put / Demestvenny Notation \\\cline{2-2}
\end{tabular}
\end{table}
%%%% end of table %%%%%

\subsection{Black and Red Modifier Marks}

All modifying marks are entered following the base neume that they modify and
are positioned by the rendering system in accordance with the anchor points
provided in the font. This includes the cinnabar pitch marks, which are still
entered following the base neume, even though they are generally positioned
to the left of the neume that they modify.

\begin{center}
\begin{tabular}{lcl}
\Large{  {\musicFont 𜽐}  + {\musicFont ◌𜼰} } & \Large → & {\Large { \musicFont 𜽐𜼰 } }  \\
\Large{  {\musicFont 𜽐}  + {\musicFont ◌𜼦} } & \Large → & {\Large { \musicFont 𜽐𜼦 } }  \\
\Large{  {\musicFont 𜽐}  + {\musicFont ◌𜼇} } & \Large → & {\Large { \musicFont 𜽐𜼇 } }   \\
\end{tabular}
\end{center}

\cuKinovar{Note}: The font provides both left-attaching and right-attaching cinnabar
pitch marks. The left-attaching pitch marks (which are standard) are encoded in
Unicode at the codepoints U+1CF00 to U+1CF0B. The right-attaching pitch marks
are rarely encountered in standard Znamenny Notation, but are commonly used
in Put / Demestvenny Notation; they are encoded at the
codepoints U+1CF0C to U+1CF17 (see Table~\ref{znampts}).

\begin{center}
\begin{tabular}{lcl}
\Large
\cuKruk{\Large 𜽗}{\ttfamily \scriptsize 1CF57}
+
\cuKruk{\Large ◌𜼆}{\ttfamily \scriptsize 1CF06}
+
\cuKruk{\Large ◌𜼐}{\ttfamily \scriptsize 1CF10}
 & \Large $\rightarrow$ & {\Large { \musicFont 𜽗𜼆𜼐 } }  \\
\end{tabular}
\end{center}

Multiple modifying marks may be entered following any base neume. Generally speaking,
the rendering system will position the marks correctly in accordance with the anchor
points specified in the font for each mark. It is expected that the combining marks
are encoded in the order given in Table~\ref{entry}. Note that the \emph{priznak}
control modifiers, if present, must be entered directly following the base neume
(see below for more information).

\begin{table}[tb]
\centering
\begin{adjustbox}{max width=0.95\textwidth}
\begin{tabular}{ccccccc}
 \rotatebox{65}{\textbf{Base Neumes}} & \rotatebox{65}{\textbf{Control Characters}} & \rotatebox{65}{\textbf{Black Pitch Marks}} & \rotatebox{65}{\textbf{Black Modification Marks}}	& \rotatebox{65}{\textbf{Left-Attaching Pitch Marks}} & \rotatebox{65}{\textbf{Red Modification Marks}} & \rotatebox{65}{\textbf{Right-Attaching Pitch Marks}} \\

{\Large \musicFont \char"1CF50}		& {\Large \musicFont \char"1CF42} & {\Large \musicFont ◌\char"1CF30}	&  {\Large \musicFont ◌\char"1CF33}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF00}} 	& {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF22}}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF0C}} \\

{\Large \musicFont \char"1CF52}		& {\Large \musicFont \char"1CF43} & {\Large \musicFont ◌\char"1CF31}	&  {\Large \musicFont ◌\char"1CF35}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF01}}	& {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF23}}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF0D}} \\

{\Large \musicFont \char"1CF53}		& {\Large \musicFont \char"1CF44} 	& {\Large \musicFont ◌\char"1CF32}	&  {\Large \musicFont ◌\char"1CF36}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF02}} & {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF24}}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF0E}} \\

{\Large \musicFont \char"1CF6F}		&  				 & 					& 	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF03}}	& {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF25}}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF0F}} \\

{\Large \musicFont \char"1CF86}		&  				 & 					&  {\Large \musicFont ◌\char"1CF38}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF04}} & {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF26}} &  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF10}}		\\

{\Large \musicFont \char"1CF92}		&  				 & 					&  {\Large \musicFont ◌\char"1CF39}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF05}}	& {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF27}} &  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF11}}	\\

{\Large \musicFont \char"1CFA2}		&  				 & 					&  {\Large \musicFont ◌\char"1CF3A}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF06}}	& {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF28}} &  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF12}} 	\\

{\Large \musicFont \char"1CFAC}		&  				 & 					&  {\Large \musicFont ◌\char"1CF3B} &  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF07}} & {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF29}}	&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF13}} \\

{\Large \musicFont \char"1CFAD}		&  				 & 					&  {\Large \musicFont ◌\char"1CF3C} &  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF08}}	 & {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF2A}}&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF14}}		\\

{\Large \musicFont \char"1CFAF}		&  				 & 					&  {\Large \musicFont ◌\char"1CF3D} &  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF09}}	 & {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF2B}}&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF15}}	\\

{\Large \musicFont \char"1CFC1}		&  				 & 					&  					&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF0A}}	& {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF2C}} &  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF16}}	\\

{\Large \musicFont \char"1CFC3}		&  				 & 					&  					&  {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF0B}}	& & {\Large \musicFont ◌\textcolor{kinovar}{\char"1CF17}}	\\

{ \emph{etc.} }		&  				 & 					&  					&  	&  &	\\

\end{tabular}
\end{adjustbox}
\caption{Order of encoding (from left to right) \label{entry}}
\end{table}

Multiple combining pitch marks may be applied to a single neume, in which case
the marks interact typographically and are stacked diagonally along the main beam
of the neume:

\begin{center}
\begin{tabular}{lcl}
\Large{  {\musicFont 𜾒}  + {\musicFont ◌𜼆} + {\musicFont ◌𜼇} } & \Large → & {\Large { \musicFont 𜾒𜼆𜼇 } }  \\
\end{tabular}
\end{center}

\clearpage
\noindent The Tonal Range marks encoded at U+1CF30 to U+1CF32 may
form ligatures in certain instances:

\begin{center}
\begin{tabular}{lcl}
\Large{  {\musicFont 𜽐}  + {\musicFont ◌𜼰} } & \Large → & {\Large { \musicFont 𜽐𜼰 } }  \\
\Large{  {\musicFont 𜾆}  + {\musicFont ◌𜼰} } & \Large → & {\Large { \musicFont 𜾆𜼰 } }
\end{tabular}
\end{center}

\subsection{Support for Priznaki}

The priznaki are tiny markers (narrow slashes or dashes) that are added
to the base neume to clarify its pitch within a Tonal Range (tetrachord).
They are used only in later stages of Znamenny Notation (Type A Notation).
For neumes pitched at the first scale degree of a Tonal Range (as indicated 
by a cinnabar mark {\musicFont ◌𜼀}, {\musicFont ◌𜼃}, {\musicFont ◌𜼆}, or {\musicFont ◌𜼉}),
no additional mark is added. For neumes pitched at the second scale degree
(as indicated by a cinnabar mark {\musicFont ◌𜼁}, {\musicFont ◌𜼄}, {\musicFont ◌𜼇},
or {\musicFont ◌𜼊}), a mark is placed on the left or lower part of the neume.
For neumes pitched at the third scale degree (as indicated by a cinnabar mark 
{\musicFont ◌𜼂}, {\musicFont ◌𜼅}, {\musicFont ◌𜼈}, or {\musicFont ◌𜼋}), a mark is
placed on the right or upper part of the neume. For some neumes, the priznaki may
attach to the tonal range markers placed above the neume rather
than to the base neume itself.

Priznaki are supported by the use of control characters, marked in yellow in Table~\ref{znampts}.
Two control characters are available, U+1CF42 Znamenny Priznak Modifier Level~2 and
U+1CF43 Znamenny Priznak Modifier Level~3, which are used to indicate the second and
third scale degrees, respectively. The presence of a Priznak Modifier indicates
that a priznak for the given scale degree should be turned on.
The absence of a Priznak Modifier indicates either that a neume is pitched at the
first scale degree of a tonal range (which is indicated by an absence of priznaki)
or that Type~B or Type~C Notation is being encoded
(where priznaki are not used at all).
The priznak modifiers should be entered immediately following the base neume to
which they apply, even if the actual priznak attaches to the tonal range marks.

\begin{center}
%\caption{Encoding model for Priznaki \label{priznakusage}}
\begin{tabular}{cccccccccl}
\Large
\cuKruk{\Large 𜽐}{\ttfamily \scriptsize U+1CF50} & {\Large +} & 
\Large \cuKruk{\Large ◌𜼰}{\ttfamily \scriptsize U+1CF30}
& {\Large + } &  
\Large \cuKruk{\Large ◌𜼄}{\ttfamily \scriptsize U+1CF04} & & & {\Large $\rightarrow$ } &
\musicFont \Large 𜽐𜼰𜼄  & \emph{no priznaki} \\
\Large \cuKruk{\Large 𜽐}{\ttfamily \scriptsize U+1CF50} & \Large + &
\Large \cuKruk{\Large 𜽂}{\ttfamily \scriptsize U+1CF42} & \Large + &
\Large \cuKruk{\Large ◌𜼰}{\ttfamily \scriptsize U+1CF30} & {\Large +} & 
\Large \cuKruk{\Large ◌𜼄}{\ttfamily \scriptsize U+1CF04} & \Large $\rightarrow$ &
\musicFont \Large 𜽐𜽂𜼰𜼄 & \emph{with lower priznak} \\
\Large \cuKruk{\Large 𜾆}{\ttfamily \scriptsize U+1CF86} & {\Large +} & 
\Large \cuKruk{\Large 𜽂}{\ttfamily \scriptsize U+1CF42}  & {\Large +} & 
\Large \cuKruk{\Large ◌𜼰}{\ttfamily \scriptsize U+1CF30} & {\Large +} &
\Large \cuKruk{\Large ◌𜼄}{\ttfamily \scriptsize U+1CF04} & \Large $\rightarrow$ &
\musicFont \Large 𜾆𜽂𜼰𜼄 &  \emph{with left priznak} \\
\Large \cuKruk{\Large 𜽐}{\ttfamily \scriptsize U+1CF50} & {\Large +} &
\Large \cuKruk{\Large 𜽃}{\ttfamily \scriptsize U+1CF43} & {\Large + } &
\Large \cuKruk{\Large ◌𜼰}{\ttfamily \scriptsize U+1CF30} & {\Large +} & 
\Large \cuKruk{\Large ◌𜼅}{\ttfamily \scriptsize U+1CF05} & {\Large $\rightarrow$} &
\musicFont \Large 𜽐𜽃𜼰𜼅 & \emph{with upper priznak} \\
\Large \cuKruk{\Large 𜾆}{\ttfamily \scriptsize U+1CF86} & {\Large +} &
\Large \cuKruk{\Large 𜽃}{\ttfamily \scriptsize U+1CF43} & {\Large +} &
\Large \cuKruk{\Large ◌𜼰}{\ttfamily \scriptsize U+1CF30} & {\Large +} &
\Large \cuKruk{\Large ◌𜼅}{\ttfamily \scriptsize U+1CF05} & {\Large $\rightarrow$} &
\musicFont \Large 𜾆𜽃𜼰𜼅 &  \emph{with right priznak} \\
% TODO: add malformed example
%{\musicFont \Huge \char"1CF86} & {\large +} & {\musicFont \Huge \char"25CC\char"1CF30} & {\large +} & {\musicFont \Huge \char"1CF43} & {\large +} & {\musicFont \Huge \char"00A0\char"25CC\textcolor{kinovar}{\char"1CF05}} & {\large →} & {\musicFont \Huge \char"1CF86\char"1CF30\char"200C\char"1CF43\textcolor{kinovar}{\char"1CF05}} &  \emph{malformed} \\
%{\tiny \ttfamily U+1CF86} & & {\tiny \ttfamily U+1CF30} & & {\tiny \ttfamily U+1CF43} & & {\tiny \ttfamily U+1CF05} & & \\
\end{tabular}
\end{center}

The Mezents font also provides additional support for the more complex system of
Priznaki used in \cite{morozov}. For this purpose, the
additional control character U+1CF44 Priznak Modifier Direction Flip may be entered,
which modifies the direction of the priznak:

\begin{center}
\begin{tabular}{lcl}
\Large{  {\musicFont 𜽐}  + {\musicFont 𜽂} } & \Large → & {\Large { \musicFont 𜽐𜽂 } }  \\
\Large{  {\musicFont 𜽐}  + {\musicFont 𜽂} + {\musicFont 𜽄} } & \Large → & {\Large { \musicFont 𜽐𜽂𜽄 } }  \\
\end{tabular}
\end{center}

\noindent Note that the Zapyataya has additional priznakified forms that may be
accessed by using the Priznak Modifier Direction Flip control character, as demonstrated
in Figure~\ref{zapyataya2}.

\begin{figure}[htb]
\centering
\begin[staffsize=20]{lilypond}
<<
\new Staff \with { \remove "Time_signature_engraver" }
    {
    \new Voice = "one"
         \with { \consists "Horizontal_bracket_engraver"  }
         
        { \cadenzaOn
        \relative c' {
        \override Score.PaperColumn #'keep-inside-line = ##t
	\override TextScript.outside-staff-priority = ##f
	% ee5c is podtinka
	 b2^\markup { \override #'(font-name . "MezenetsUnicode") \abs-fontsize #18 {𜽝 + ◌𜽁} }
	  \bar "|"
	c^\markup { \override #'(font-name . "MezenetsUnicode") \abs-fontsize #18 {𜽝} }
	
	d^\markup { \override #'(font-name . "MezenetsUnicode") \abs-fontsize #18 {𜽝 + 𜽂} }
	e^\markup { \override #'(font-name . "MezenetsUnicode") \abs-fontsize #18 {𜽝 + 𜽃} } 
	\bar "|"

%	\once \override HorizontalBracket #'direction = #UP

	f^\markup { \override #'(font-name . "MezenetsUnicode") \abs-fontsize #18 {𜽝 + 𜽄} }
	
	g^\markup { \override #'(font-name . "MezenetsUnicode") \abs-fontsize #18 {𜽝 + 𜽂} }
	\once \override Stem #'direction = #DOWN
	a^\markup { \override #'(font-name . "MezenetsUnicode") \abs-fontsize #18 {𜽝 + 𜽃} } 
	\bar "|"

%	\override TextScript #'Y-extent = #'(-3.0 . 3.0)
	bes^\markup { \override #'(font-name . "MezenetsUnicode") \abs-fontsize #18 {𜽝 + 𜽄𜽄} }
	\bar "|"
       }
       }
   }

  \new Lyrics \lyricsto "one" {
	𜽝𜽁𜼂 𜽝𜼃 𜽝𜽂𜼄 𜽝𜽃𜼅 𜽝𜽄𜼆 𜽝𜽂𜼇 𜽝𜽃𜼈 𜽝𜽄𜽄𜼉
   }
>> 
\layout {
    \context {
      \Score
     \override SpacingSpanner #'base-shortest-duration = #(ly:make-moment 1 64)
   }
   \context {
	\Lyrics
      \override LyricText.font-size = #+8
      \override LyricText.font-name = #"Mezenets Unicode"
  }
}
\end{lilypond}
\caption{The Zapyataya with Different Priznaki in \cite{morozov} \label{zapyataya2}}
\end{figure}%

\cuKinovar{Note Further}: The precomposed priznakified glyphs are encoded in the
Private Use Area (PUA) at codepoints U+EB60 to U+EBFF. They can be accessed directly
in settings where relying on OpenType features is not possible or not desirable. See
the section on PUA usage, below.

\subsection{Demestvenny / Put Notation}

The Mezenets Unicode font also provides the characters necessary for typesetting
Demestvenny / Put (Kazan) Notations. An example of the new style of Demestvenny
Notation is presented in Figure~\ref{demestvenny}. The additional glyphs
necessary for Demestvenny / Put (Kazan) Notations are labeled in green
in Figure~\ref{znampts}. In addition, the system of priznaki used in the older Put Notation
is supported via the two additional control characters U+1CF45 Priznak Modifier
Kryzh and U+1CF46 Priznak Modifier Rog (likewise marked in yellow in
Figure~\ref{znampts}):

\begin{center}
\begin{tabular}{lcl}
\Large{  {\musicFont 𜽐}  + {\musicFont 𜽅} } & \Large → & {\Large { \musicFont 𜽐𜽅 } }  \\
\Large{  {\musicFont 𜽐}  + {\musicFont 𜽆} } & \Large → & {\Large { \musicFont 𜽐𜽆 } }  \\
\end{tabular}
\end{center}

\noindent Note that support of ligatures used in Demestvenny Notation requires
the use of one of the stylistic sets described below.

\begin{figure}[tb]
\centering
\begin{minipage}{0.75\textwidth}
\begin{churchslavonic}
\noindent
\Large
\cuKrukPara[krukFont=\newstyle,sylRuleHeight=0.02em]{
𜽛𜼆𜼓 𜾆𜼈𜾩𜼢𜽐𜼶 𜽐𜽂𜼇 𜽝𜽂𜼢 𜽛𜽃𜼈𜼉 𜽖𜽃𜼈 𜽵𜼢𜼥 𜾆𜽂𜼱𜼇 𜽖𜽀𜼆 𜽛𜼆 𜽖𜽃𜼈 𜽔𜽀𜽀𜼉 𜽝𜽔𜼻𜼊 𜽝𜼤𜽐𜽃𜼈 𜽖𜽃𜽀𜼢 𜽛𜽃𜼈 𜽖𜽂𜼊 𜽵𜼢𜼥 𜽖𜼉 𜽖𜽀𜼢 𜽐𜽂𜼇 𜽖𜼉 𜽛𜽃𜼈𜼒 𜾆𜼱𜼊 𜾩𜼾𜼢𜽝𜼈𜽔𜼻𜼊 𜽝𜼤𜽐𜽃𜼈 𜽝𜽂𜼈 𜽛𜽃𜼈𜼉 𜽖𜽃𜼈 𜽵𜼢𜼥 𜾆𜼇𜾩𜽀𜼢 𜽔𜼆 𜽤𜼅𜼇 𜽚𜼢 𜾆𜽃𜼱𜼈 𜽝𜼻𜼆 𜾁𜼄
\\
тво-рѧ-и а---нге-лы сво-ѧ дꙋ---хи и слꙋ-ги- сво-ѧ- ѡ----гнь па--лѧ--------щь.
}
\end{churchslavonic}
\end{minipage}
\caption{Example of Demestvenny Notation \label{demestvenny}}
\end{figure}

\subsection{Advanced Font Features}

The Mezenets Unicode font provides additional glyphs via the
Stylistic Alternates and Stylistic Sets features.
The following stylistic sets are available:

\begin{itemize}
\item \textbf{ss01} (Stylistic Set 1) -- Old-style Demestvenny. This stylistic set turns
on kerning rules that force adjoining neumes to make ligatures, as is customary
in Demestvenny Notation. At the same time, the Zanozhek, Mechik, and other neumes 
are typeset in the old style, commonly found in the manuscript tradition.

\begin{center}
\begin{tabular}{lr}
Regular         & {\Large \musicFont 𜽐𜼆𜽖𜼢 𜾩𜼾𜼆𜽝 𜾩𜼈𜾫𜼓} \\
\textbf{ss01}   & {\Large \oldstyle 𜽐𜼆𜽖𜼢 𜾩𜼾𜼆𜽝 𜾩𜼈𜾫𜼓} \\
\end{tabular}
\end{center}

\item \textbf{ss02} (Stylistic Set 2) -- New-style Demestvenny. This stylistic set turns
on kerning rules that force adjoining neumes to make ligatures, as is customary
in Demestvenny Notation. The Zanozhek, Mechik, and other neumes are typeset in the
new style, as used in \cite{kalashnikov2}.

\begin{center}
\begin{tabular}{lr}
Regular         & {\Large \musicFont 𜽐𜼆𜽖𜼢 𜾩𜼾𜼆𜽝 𜾩𜼈𜾫𜼓} \\
\textbf{ss02}   & {\Large \newstyle 𜽐𜼆𜽖𜼢 𜾩𜼾𜼆𜽝 𜾩𜼈𜾫𜼓} \\
\end{tabular}
\end{center}

\item \textbf{ss03} (Stylistic Set 3) -- New-style Contracted Demestvenny. This stylistic
set turns on additional kerning rules that force some adjoining neumes to make
contracted ligatures. The Zanozhek, Mechik, and other neumes are typeset in the
new style, as used in \cite{kalashnikov2}.

\begin{center}
\begin{tabular}{lr}
Regular         & {\Large \musicFont 𜽐𜼆𜽖𜼢 𜾩𜼾𜼆𜽝 𜾩𜼈𜾫𜼓} \\
\textbf{ss03}   & {\Large \contracted 𜽐𜼆𜽖𜼢 𜾩𜼾𜼆𜽝 𜾩𜼈𜾫𜼓} \\
\end{tabular}
\end{center}

\item \textbf{ss04} (Stylistic Set 4) -- Render cinnabar marks in black. This stylistic
set turns off the coloring of cinnabar marks as specified by the COLR / CPAL or SVG tables and
renders them in black. \cuKinovar{NB}: turning on this feature will have a visible
effect only in software that supports color fonts. In \XeTeX{} and \LuaTeX{} use instead
the \pkg{churchslavonic} package with the \texttt{noautocolormarks} option.

\begin{center}
\begin{tabular}{lr}
Regular             & {\Large \musicFont 𜽐𜼆𜽖𜼢 𜾩𜼾𜼆𜽝 𜾩𜼈𜾫𜼓} \\
\textbf{ss04}       & {\Large \musicFont 𜽐𜽖 𜾩𜼾𜽝 𜾩𜾫} \\
\end{tabular}
\end{center}

\end{itemize}

The Stylisic Alternates (\emph{salt}) feature may be used to access
alternate glyph forms, certain non-contextual variants and various
non-standard glyphs, as demonstrated in Table~\ref{salts}. The
codepoints of the glyphs are indicated in parentheses; for alternate
glyph forms, these are codepoints in the Private Use Area (PUA).
Accessing glyph alternates from the PUA directly by codepoint
is not recommended, but may be necessary in certain instances where
support for OpenType features is not available. See the
section on the PUA, below.

\begin{table}[htbp]
\centering
\caption{Glyphs Accessible via Stylistic Alternates (\emph{salt}) \label{salts}}
\begin{tabular}{r|ll}
\textbf{Base Form} & \multicolumn{2}{c}{\textbf{Alternate Forms}} \\
                   & \texttt{salt=1} & \texttt{salt=2} \\
\hline
\musicFont | \texttt{(U+007C)} & \musicFontSalt | \texttt{(U+EA1B)} \\
\musicFont - \texttt{(U+002D)} & \musicFontSalt - \texttt{(U+EA1D)} \\
\musicFont э \texttt{(U+044D)} & \musicFontSalt э \texttt{(U+EA1C)} \\
\musicFont ◌𜼀 \texttt{(U+1CF00)} & \musicFontSalt ◌𜼀 \texttt{(U+EA00)} \\
\musicFont ◌𜼁 \texttt{(U+1CF01)} & \musicFontSalt ◌𜼁 \texttt{(U+EA02)} \\
\musicFont ◌𜼃 \texttt{(U+1CF03)} & \musicFontSalt ◌𜼃 \texttt{(U+EA01)}  \\
\musicFont ◌𜼄 \texttt{(U+1CF04)} & \musicFontSalt ◌𜼄 \texttt{(U+EA03)} \\
\musicFont ◌𜼅 \texttt{(U+1CF05)} & \musicFontSalt ◌𜼅 \texttt{(U+EA04)} \\
\musicFont ◌𜼉 \texttt{(U+1CF09)} & \musicFontSalt ◌𜼉 \texttt{(U+EA08)} \\
\musicFont ◌𜼢 \texttt{(U+1CF22)} & \musicFontSalt ◌𜼢 \texttt{(U+EA10)} \\
\musicFont ◌𜼣 \texttt{(U+1CF23)} & \musicFontSalt ◌𜼣 \texttt{(U+EA11)} \\
\musicFont ◌𜼤 \texttt{(U+1CF24)} & \musicFontSalt ◌𜼤 \texttt{(U+EA12)} \\
\musicFont ◌𜼧 \texttt{(U+1CF27)} & \musicFontSalt ◌𜼧 \texttt{(U+EA13)} \\
\musicFont ◌𜼭 \texttt{(U+1CF2D)} & \musicFontSalt ◌𜼭 \texttt{(U+EA15)} \\
\musicFont ◌𜼳 \texttt{(U+1CF33)} & \musicFontSalt ◌𜼳 \texttt{(U+EA16)} \\
\musicFont ◌𜼵 \texttt{(U+1CF35)} & \musicFontSalt ◌𜼵 \texttt{(U+EA17)} \\
\musicFont 𜽟 \texttt{(U+1CF5F)} & \musicFontSalt 𜽟 \texttt{(U+EAA1)} \\
\musicFont 𜽽 \texttt{(U+1CF7D)} & \musicFontSalt 𜽽 \texttt{(U+EAE3)} & \musicFontSaltTwo 𜽽  \texttt{(U+EAE7)} \\
\musicFont 𜽾 \texttt{(U+1CF7E)} & \musicFontSalt 𜽾  \texttt{(U+EAEE)} & \musicFontSaltTwo 𜽾  \texttt{(U+EAF1)} \\
\musicFont 𜽿 \texttt{(U+1CF7F)} & \musicFontSalt 𜽿  \texttt{(U+EC21)} \\
\musicFont 𜾂 \texttt{(U+1CF82)} & \musicFontSalt 𜾂 \texttt{(U+EAF4)} \\
\musicFont 𜾄 \texttt{(U+1CF84)} & \musicFontSalt 𜾄  \texttt{(U+EAF6)} \\
\musicFont 𜾅 \texttt{(U+1CF85)} & \musicFontSalt 𜾅  \texttt{(U+EAF8)}\\
\musicFont 𜾑 \texttt{(U+1CF91)} & \musicFontSalt 𜾑  \texttt{(U+EB0B)}\\
\musicFont 𜾘 \texttt{(U+1CF98)} & \musicFontSalt 𜾘  \texttt{(U+EB20)}\\
\musicFont 𜾙 \texttt{(U+1CF99)} & \musicFontSalt 𜾙  \texttt{(U+EB22)} \\
\musicFont 𜿀 \texttt{(U+1CFC0)} & \musicFontSalt 𜿀  \texttt{(U+EB4E)} \\
\musicFont 𜿁 \texttt{(U+1CFC1)} & \musicFontSalt 𜿁  \texttt{(U+EA55)} \\
\musicFont 𜿂 \texttt{(U+1CFC2)} & \musicFontSalt 𜿂  \texttt{(U+EA56)} \\
\hline
\end{tabular}
\end{table}

In \XeTeX{} and \LuaTeX{}, features may be turned on using methods provided in the
\pkg{fontspec} package, for example:

\begin{verbatim}
\newfontfamily{\znamFont}[StylisticSet=1]{Mezenets Unicode}
\end{verbatim}

\noindent Please consult the \href{https://ctan.org/pkg/fontspec}{\pkg{fontspec} documentation} for more information.

In LibreOffice, Stylistic Sets and other advanced OpenType features are available
starting with version 4.1. However, there is no graphical interface that can be used
to turn these features on and off. Instead, a special extended font name
syntax has been developed: in order to activate an optional feature, its ID,
followed by (optionally) an equals sign and the ID of the desired setting, are appended
directly to the font name string. An amperstand is used to separate
different feature/settings pairs. For example, setting the font to either of the following
will enable Stylistic Set~1:

\begin{verbatim}
Mezenets Unicode:ss01
Mezenets Unicode:ss01=1
\end{verbatim}

\noindent while setting the following will turn on both Stylistic Sets 1 and 4:

\begin{verbatim}
Mezenets Unicode:ss01&ss04
\end{verbatim}

In HTML, Stylistic Sets and other advanced features may be turned on using the
\texttt{font-feature-settings} CSS property, for example:

\begin{verbatim}
.class {
  font-family: 'Mezenets Unicode';
  font-feature-settings: 'ss04';
}
\end{verbatim}

%The feature is supported in the 
%\href{https://caniuse.com/#search=font-feature-settings}{latest version} of most browsers.

\section{Shaidur Unicode}

This font is still under development.

\section{Smolensky}

\begin{figure}[tb]
\centering
\begin{minipage}{0.75\textwidth}
\begin{churchslavonic}
\archaic
\noindent
\Large
\cuKrukPara[sylRuleHeight=0.02em,krukFont=\smol]{
𜽒 𜽐 𜽖 𜽖 𜽐𜼱 𜽖 𜽖 𜽖 𜽖 𜽐 𜽞 𜽜 𜾐 𜾆 𜾆 𜽖 𜽖 𜽘 𜽖 𜽐𜼰 𜽜 𜽫 𜽖 𜽖 𜽐𜼰 𜽖 𜽖 𜾵 𜾆 𜾆 𜽞 𜽐𜼱 𜽖 𜽖 𜽐 𜽖 𜽐𜼰 𜽖 𜽖 𜽖 𜽖 𜽐𜼰 𜽖 𜽐 𜽖 𜾆𜼱 𜽖 𜽖 𜽐 𜽖 𜽖 𜽖 𜽜 𜾐 𜾆 𜾁
\\
Ко-нѧ и въ-са-дь-ни-ки· въ мо-ре чь-рмь-но-ѥ· съ-крᲂу-ша-ꙗ-и бра-ни· мꙑ-ше-це-ю вꙑ-со-ко-ю· хри-сто-съ ис-трѧ-слъ ѥ-сть· иꙁ-дра-и-лѧ же съ-па-се· по-бѣ-дь-нᲂу-ю пѣс-нь по-ю-щ⁘
}
\end{churchslavonic}
\end{minipage}
\caption{Example of Archaic Znamenny Notation (Hirmologion of Grigorovich) \label{smolensky}}
\end{figure}

Smolensky is a font intended for the typesetting of archaic Znamenny Notation
as found in musical manuscripts of the 12\textsuperscript{th}--15\textsuperscript{th}
centuries. The font is named after the renowned Russian musicologist,
choir director and composer
\href{https://en.wikipedia.org/wiki/Stepan_Smolensky}{Stepan Smolensky}.
The glyphs were traced on the basis of photographs of the following manuscripts:

\begin{itemize}
\item Novgorod Sticherarion (NLR Sof. 384) -- 12\textsuperscript{th}~century
\item St. Petersburg Sticherarion (RASL 34.7.6) -- 12\textsuperscript{th}~century
\item Hirmologion of Grigorovich (Chilandar Slav. 308, RSL Grig. 37, NLR Q.п.I.75) -- 13\textsuperscript{th}~century
\end{itemize}

\noindent The font provides additional characters needed for the archaic Znamenny
Notation (in particular, the \emph{kryukovye strely} -- ``hook-based arrows''), which
are colored in light blue in Table~\ref{znampts}.

\cuKinovar{Note}: This font does not provide any glyphs for the cinnabar marks,
for neumes used in Demestvenny / Put Notation, or any support for priznaki, as these
are entirely anachronistic to the notation of the period that the font reproduces.
The font is primarily of interest to Slavic musicologists studying early
Slavic musical manuscripts. 
An example of text typeset in this font is presented in Figure~\ref{smolensky}.

\section{Input Methods}

The authors of the font also offer a keyboard layout for entering
Znamenny Notation symbols via the keyboard.
The keyboard layout is distributed separately from the fonts (see
below for installation instructions). It is a four-level layout.
The first level provides
access to the left-side combining cinnabar pitch marks and various neumes, 
as demonstrated in Figure~\ref{znamkeysmain}. The second level
may be turned on by pressing the \keystroke{Shift} key, and provides access to
the right-side combining cinnabar pitch marks and various other neumes,
as demonstrated in Figure~\ref{znamkeyshift}. A third level,
which provides access to additional neumes (see Figure~\ref{znamkeysalt}),
is turned on by pressing
the \keystroke{AltGr} key. On Windows systems, this is usually the right \keystroke{Alt} key;
on GNU / Linux this may be either \keystroke{Alt} key. A final level is turned on by
pressing both the \keystroke{AltGr} and \keystroke{Shift} keys simultaneously; it provides the neumes
demonstrated in Figure~\ref{znamkeysaltshift}.

\begin{figure}[htbp]
\centering
\makebox[0.6\textwidth][s]{\keystroke{~◌𜼢} \keystroke{~◌𜼀} \keystroke{~◌𜼁} \keystroke{~◌𜼂} \keystroke{~◌𜼃} \keystroke{~◌𜼄} \keystroke{~◌𜼅} \keystroke{~◌𜼆} \keystroke{~◌𜼇} \keystroke{~◌𜼈} \keystroke{~◌𜼉} \keystroke{~◌𜼊} \keystroke{~◌𜼋} \keystroke{Bckspc}}

\makebox[0.6\textwidth][s]{\keystroke{Tab~~} \keystroke{𜾃} \keystroke{𜽵} \keystroke{𜾕} \keystroke{𜾥} \keystroke{𜾬} \keystroke{𜾧} \keystroke{𜽯} \keystroke{𜽜} \keystroke{◌𜼦} \keystroke{𜽰} \keystroke{◌𜼣} \keystroke{◌𜼨} \keystroke{~𜾯~}}

\makebox[0.6\textwidth][s]{\keystroke{CapsLk}  \keystroke{𜽒} \keystroke{𜽖} \keystroke{𜽣} \keystroke{𜽧} \keystroke{𜽝} \keystroke{𜾒} \keystroke{𜾢} \keystroke{𜽐} \keystroke{𜽽} \keystroke{◌𜼰} \keystroke{◌𜼼} \keystroke{~~Enter}}
  
\makebox[0.6\textwidth][s]{\keystroke{Shift $\uparrow$~~~} \keystroke{𜾆𜾅} \keystroke{𜽛} \keystroke{𜽱} \keystroke{𜽹} \keystroke{𜾆} \keystroke{𜾈} \keystroke{𜾐} \keystroke{◌𜼺} \keystroke{◌𜼶} \keystroke{◌𜼵} \keystroke{~~~$\uparrow$ Shift}}

\makebox[0.6\textwidth][s]{\keystroke{Ctrl~~} \keystroke{Super} \keystroke{Alt~~} \keystroke{~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~} \keystroke{AltGr} \keystroke{Fn~} \keystroke{Ctrl~~}}
\caption{Znamenny Keyboard Mappings (no modifier keys depressed) \label{znamkeysmain}}
\end{figure}

\begin{figure}[htbp]
\centering
\makebox[0.6\textwidth][s]{\keystroke{◌𜽁} \keystroke{◌𜼌} \keystroke{◌𜼍} \keystroke{◌𜼎} \keystroke{◌𜼏} \keystroke{◌𜼐} \keystroke{◌𜼑} \keystroke{◌𜼒} \keystroke{◌𜼓} \keystroke{◌𜼔} \keystroke{◌𜼕} \keystroke{◌𜼖} \keystroke{◌𜼗} \keystroke{Bckspc}}

\makebox[0.6\textwidth][s]{\keystroke{Tab~~} \keystroke{𜾂} \keystroke{𜽶} \keystroke{𜾖} \keystroke{𜾦} \keystroke{𜾭} \keystroke{𜾨} \keystroke{𜽮} \keystroke{𜽭} \keystroke{◌𜼧} \keystroke{𜽓} \keystroke{◌𜼤} \keystroke{◌𜼩} \keystroke{~𜾰~}}

\makebox[0.6\textwidth][s]{\keystroke{CapsLk}  \keystroke{𜾁} \keystroke{𜽗} \keystroke{𜽤} \keystroke{𜽨} \keystroke{𜽞} \keystroke{𜾓} \keystroke{𜾣} \keystroke{𜽑} \keystroke{𜽾} \keystroke{◌𜼱} \keystroke{◌𜼽} \keystroke{~~Enter}}
  
\makebox[0.6\textwidth][s]{\pressedkey{Shift $\uparrow$~~~} \keystroke{𜾅} \keystroke{𜽔} \keystroke{𜽲} \keystroke{𜽺} \keystroke{𜾆𜼰} \keystroke{𜾇} \keystroke{𜾐𜼰} \keystroke{◌𜼻} \keystroke{◌𜼸} \keystroke{◌𜼳} \pressedkey{~~~$\uparrow$ Shift}}

\makebox[0.6\textwidth][s]{\keystroke{Ctrl~~} \keystroke{Super} \keystroke{Alt~~} \keystroke{~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~} \keystroke{AltGr} \keystroke{Fn~} \keystroke{Ctrl~~}}
\caption{Znamenny Keyboard Mappings (with Shift key depressed) \label{znamkeyshift}}
\end{figure}

\begin{figure}[htbp]
\centering
\makebox[0.6\textwidth][s]{\keystroke{\textcolor{lightgray}{`}} \keystroke{\textcolor{lightgray}{1}} \keystroke{\textcolor{lightgray}{2}} \keystroke{~◌𜼘} \keystroke{\textcolor{lightgray}{4}} \keystroke{\textcolor{lightgray}{5}} \keystroke{\textcolor{lightgray}{6}} \keystroke{~◌𜼙} \keystroke{~◌𜼚} \keystroke{~◌𜼛} \keystroke{\textcolor{lightgray}{0}} \keystroke{\textcolor{lightgray}{-}} \keystroke{\textcolor{lightgray}{=}} \keystroke{Bckspc}}

\makebox[0.6\textwidth][s]{\keystroke{Tab~~} \keystroke{𜿁} \keystroke{𜽷} \keystroke{𜾗} \keystroke{\textcolor{lightgray}{R}} \keystroke{𜾮} \keystroke{𜾠} \keystroke{\textcolor{lightgray}{U}} \keystroke{𜽫} \keystroke{◌𜼪} \keystroke{𜿃} \keystroke{◌𜼥} \keystroke{◌𜼫} \keystroke{~𜾱~}}

\makebox[0.6\textwidth][s]{\keystroke{CapsLk}  \keystroke{\textcolor{lightgray}{A}} \keystroke{𜽘} \keystroke{𜽥} \keystroke{𜽩} \keystroke{𜽟} \keystroke{𜾄} \keystroke{\textcolor{lightgray}{J}} \keystroke{𜽚} \keystroke{𜽿} \keystroke{◌𜼲} \keystroke{◌𜼬} \keystroke{~~Enter}}
  
\makebox[0.6\textwidth][s]{\keystroke{Shift $\uparrow$~~~} \keystroke{𜽡} \keystroke{𜾳} \keystroke{𜽳} \keystroke{𜽻} \keystroke{𜾆𜼱} \keystroke{𜾉} \keystroke{𜾋} \keystroke{\textcolor{lightgray}{,}} \keystroke{◌𜼹} \keystroke{~◌𜼴} \keystroke{~~~$\uparrow$ Shift}}

\makebox[0.6\textwidth][s]{\keystroke{Ctrl~~} \keystroke{Super} \keystroke{Alt~~} \keystroke{~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~} \pressedkey{AltGr} \keystroke{Fn~} \keystroke{Ctrl~~}}
\caption{Znamenny Keyboard Mappings (with AltGr key depressed) \label{znamkeysalt}}
\end{figure}

\begin{figure}[htbp]
\centering
\makebox[0.6\textwidth][s]{\keystroke{\textcolor{lightgray}{`}} \keystroke{\textcolor{lightgray}{1}} \keystroke{\textcolor{lightgray}{2}} \keystroke{\textcolor{lightgray}{3}} \keystroke{\textcolor{lightgray}{4}} \keystroke{\textcolor{lightgray}{5}} \keystroke{\textcolor{lightgray}{6}} \keystroke{\textcolor{lightgray}{7}} \keystroke{\textcolor{lightgray}{8}} \keystroke{\textcolor{lightgray}{9}} \keystroke{\textcolor{lightgray}{0}} \keystroke{\textcolor{lightgray}{-}} \keystroke{\textcolor{lightgray}{=}} \keystroke{Bckspc}}

\makebox[0.6\textwidth][s]{\keystroke{Tab~~} \keystroke{𜿂} \keystroke{𜽸} \keystroke{\textcolor{lightgray}{E}} \keystroke{\textcolor{lightgray}{R}} \keystroke{\textcolor{lightgray}{T}} \keystroke{𜾪} \keystroke{\textcolor{lightgray}{U}} \keystroke{𜽬} \keystroke{\textcolor{lightgray}{O}} \keystroke{𜾆𜿃} \keystroke{\textcolor{lightgray}{[}} \keystroke{\textcolor{lightgray}{]}} \keystroke{\textcolor{lightgray}{\textbackslash}~~}}

\makebox[0.6\textwidth][s]{\keystroke{CapsLk} \keystroke{\textcolor{lightgray}{A}} \keystroke{𜽙} \keystroke{𜽦} \keystroke{𜽪} \keystroke{𜽠} \keystroke{\textcolor{lightgray}{H}} \keystroke{\textcolor{lightgray}{J}} \keystroke{𜽕} \keystroke{\textcolor{lightgray}{L}} \keystroke{\textcolor{lightgray}{;}} \keystroke{\textcolor{lightgray}{'}} \keystroke{~~Enter}}
  
\makebox[0.6\textwidth][s]{\pressedkey{Shift $\uparrow$~~~} \keystroke{𜽢} \keystroke{𜾴} \keystroke{𜽴} \keystroke{𜽼} \keystroke{𜾑} \keystroke{𜾊} \keystroke{𜾋𜼰} \keystroke{\textcolor{lightgray}{,}} \keystroke{\textcolor{lightgray}{.}} \keystroke{\textcolor{lightgray}{/}} \pressedkey{~~~$\uparrow$ Shift}}

\makebox[0.6\textwidth][s]{\keystroke{Ctrl~~} \keystroke{Super} \keystroke{Alt~~} \keystroke{~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~} \pressedkey{AltGr} \keystroke{Fn~} \keystroke{Ctrl~~}}
\caption{Znamenny Keyboard Mappings (with AltGr and Shift keys depressed) \label{znamkeysaltshift}}
\end{figure}

\subsection{Installation Instructions}

\subsubsection{On GNU / Linux}

On Linux and other Unix-like systems Znamenny keyboard entry requires
use of the Intelligent Input Bus (IBus) and the \texttt{m17n} library.
The m17n library realizes multilingualization for
GNU/Linux and other Unix-based applications. The Slavonic Computing Initiative
maintains the package \texttt{m17n-cu}, which provides Church Slavonic data for
the m17n library. The Znamenny keyboard layout is provided in this library
together with the other Church Slavonic (Cyrillic and Glagolitic) and Russian
Extended layouts.

For Debian-based systems such as Ubuntu and Linux Mint:
\begin{enumerate}
\item Add the SCI ppa to your sources: \texttt{sudo add-apt-repository ppa:aleksandr-andreev/sci}
\item Update your source tree: \texttt{sudo apt update}
\item Install the library: \texttt{sudo apt install m17n-cu}
\end{enumerate}

On other systems, you may need to install the data manually:

\begin{enumerate}
\item \href{https://github.com/typiconman/m17n-cu/releases}{Download the m17n-cu package}
and extract its contents to some directory in your home folder (for
example, \texttt{/home/jblow/m17n-cu/}).

\item Check that the m17n database data (usually packaged as \texttt{m17n-db}) were
properly installed in your \texttt{/usr/share/m17n/} directory.
(You can run \texttt{m17n-db} to check). If the data are installed to some
other location, you will need to edit Makefile and point it to the correct
path for your m17n data. See the INSTALL file for details.

\item Now install the additional Church Slavonic m17n data.
To do this, in the directory where you have downloaded the
files of this package, run: \texttt{sudo make install DESTDIR=/}.
This command installs the keyboard data files into your m17n data directory.
\end{enumerate}

Once you've installed the \texttt{m17n-cu} data, you need to configure IBus:

\begin{enumerate}
\item Install the \texttt{ibus-m17n} package for your distribution.
This is probably provided by your package manager, alternatively,
you may download the latest version of \texttt{ibus-m17n} from the
\href{https://github.com/ibus/ibus/}{IBus project website}.

\item Run \texttt{im-config} and set IBus to be your default intput method.

\item Load the Slavonic input method.
From the Terminal shell, run \verb+ibus-setup+.
\begin{itemize}
\item On the \texttt{Input Method} tab, check \texttt{Customize active input methods}.
\item Click on \texttt{Select input method}.
\item Click on \texttt{Show all input methods}.
\item Scroll down and select \texttt{Church Slavic; Old Slavonic; Old ...}, then
select the Znamenny keyboard (select the \texttt{znamstd} variant)
\item Click Add
\item Click Close
\end{itemize}
\end{enumerate}

Installation should be complete at this point.
By default, \texttt{IBus} can be turned off and on by pressing 
\keystroke{Ctrl} and \keystroke{Space} on the keyboard. 
You can switch between input methods by pressing 
\keystroke{Ctrl} \keystroke{Shift} \keystroke{Space}. 
You can customize these keyboard shortcuts by running \verb+ibus-setup+ and changing 
the options on the \texttt{General} tab. 
To uninstall the keyboard layouts, the \texttt{m17n-cu} data, \texttt{IBus} 
or other components, follow the instructions in the \texttt{INSTALL}
file that comes with \texttt{m17n-cu}. 

While the authors do not provide technical support, 
community-based support for \texttt{m17n-cu} 
is available on the 
\href{https://ponomar.net/mailman/listinfo/sci-users_ponomar.net}{Slavonic Computing Initiative mailing list \texttt{sci-users}}.

\subsubsection{On Microsoft Windows}

On Windows systems, download the Znamenny Keyboard Layout
\href{https://www.ponomar.net/files/cu-znams.zip}{zip archive}.
Extract the archive and run \texttt{setup.exe}. Follow the on-screen instructions.
Note that because Microsoft Corporation does not recognize Znamenny Notation
as a valid writing system, the software installs as a Russian keyboard layout
and will appear in your language bar as \texttt{Russian (Znamenny Notation)}.
Anecdotal evidence also suggests that Microsoft Windows is unable to
recognize keyboard entry of characters outside of the Unicode 10.0 range.
Please note that we do not provide any technical support for Microsoft products.
Please do not write to the SCI-users mailing list with Windows-related issues.

\begin{thebibliography}{9}

\bibitem{PROP}
  Andreev A. and N. Simmons.
  ``Proposal to Encode Znamenny Musical Notation in Unicode''.
  (L2/19-053). 2019.
  \url{https://www.ponomar.net/files/palaeoslavic.pdf}

\bibitem{morozov}
  Morozov, A. I. \textrussian{Круг церковного древнего знаменного пения. В шести частях. Иждивением потомственного почетного гражданина Арсения Ивановича Морозова},
  St. Petersburg: Tipografiya V.~S. Balasheva, 1884--1885.

\bibitem{kalashnikov2}
  Kalashnikov, L. F. \textrussian{Азбука Демественного пения}. 
  Kiev: Tipografiya S.~V. Kulʹzhenko, 1911.


\end{thebibliography}

\end{document}